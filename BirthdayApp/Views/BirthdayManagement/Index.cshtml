@model IEnumerable<BirthdayApp.Models.BirthdayWithStatus>

<h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–Ω—è–º–∏ —Ä–æ–∂–¥–µ–Ω–∏—è</h2>

<div class="mb-3">
    <a class="btn btn-success" href="@Url.Action("Create")">
        <i class="bi bi-plus-circle"></i> –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è
    </a>
</div>

@if (!Model.Any())
{
    <div class="alert alert-info">
        <p>–ù–µ—Ç –Ω–∏ –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏. <a href="@Url.Action("Create")">–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</a></p>
    </div>
}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>–ò–º—è</th>
                <th>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–î–Ω–µ–π –¥–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è</th>
                <th>–í–æ–∑—Ä–∞—Å—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –î–†</th>
                <th>–§–æ—Ç–æ</th>
                <th>–•–æ–±–±–∏ –∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                var rowClass = item.Status switch
                {
                    BirthdayStatus.Today => "table-success",
                    BirthdayStatus.Soon => "table-warning",
                    BirthdayStatus.Later => "table-info",
                    BirthdayStatus.Passed => "table-secondary",
                    _ => ""
                };

                var statusText = item.Status switch
                {
                    BirthdayStatus.Today => "üéâ –°–µ–≥–æ–¥–Ω—è",
                    BirthdayStatus.Soon => "üìÖ –°–∫–æ—Ä–æ",
                    BirthdayStatus.Later => "üìÜ –ü–æ–∑–∂–µ",
                    BirthdayStatus.Passed => "‚úÖ –ü—Ä–æ—à–µ–ª",
                    _ => ""
                };

                <tr class="@rowClass">
                    <td>
                        @if (item.Status == BirthdayStatus.Today)
                        {
                            <strong>@item.Birthday.Name</strong>
                        }
                        else
                        {
                            @item.Birthday.Name
                        }
                    </td>
                    <td>@item.Birthday.BirthDate.ToString("d")</td>
                    <td>@statusText</td>
                    <td>
                        @if (item.DaysUntilBirthday == 0)
                        {
                            <span class="badge bg-success">–°–µ–≥–æ–¥–Ω—è!</span>
                        }
                        else
                        {
                            @item.DaysUntilBirthday
                        }
                    </td>
                    <td>@item.AgeOnNextBirthday</td>
                    <td>
                        @if (!string.IsNullOrEmpty(item.Birthday.PhotoPath))
                        {
                            <img src="@item.Birthday.PhotoPath" alt="–§–æ—Ç–æ" style="max-width:120px; max-height:120px; object-fit:cover; border-radius:8px;" />
                        }
                    </td>
                    <td>@item.Birthday.Hobbies</td>
                    <td>
                        <div class="btn-group-vertical" role="group">
                            <a href="@Url.Action("Details", new { id = item.Birthday.Id })" class="btn btn-info btn-sm mb-1">
                                <i class="bi bi-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä
                            </a>
                            <a href="@Url.Action("Edit", new { id = item.Birthday.Id })" class="btn btn-primary btn-sm mb-1">
                                <i class="bi bi-pencil"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                            </a>
                            <form asp-action="Delete" method="post" style="display:inline">
                                <input type="hidden" name="id" value="@item.Birthday.Id" />
                                <button type="submit" class="btn btn-danger btn-sm" 
                                        onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è @item.Birthday.Name?')">
                                    <i class="bi bi-trash"></i> –£–¥–∞–ª–∏—Ç—å
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}

<div class="mt-4">
    <a class="btn btn-secondary" href="@Url.Action("Index", "Birthday")">–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è</a>
    <a class="btn btn-secondary" href="@Url.Action("Index", "Home")">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
</div> 